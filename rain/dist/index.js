!function n(a,r,i){function e(l,o){if(!r[l]){if(!a[l]){var f="function"==typeof require&&require;if(!o&&f)return f(l,!0);if(t)return t(l,!0);throw new Error("Cannot find module '"+l+"'")}var s=r[l]={exports:{}};a[l][0].call(s.exports,function(n){var r=a[l][1][n];return e(r?r:n)},s,s.exports,n,a,r,i)}return r[l].exports}for(var t="function"==typeof require&&require,l=0;l<i.length;l++)e(i[l]);return e}({1:[function(n,a,r){!function(n){function a(){m=v>5&&18>v?"白天":"晚上";var n=new Firebase("https://realtaiwanstat2.firebaseio.com");n.child("rain").limitToLast(1).on("child_added",function(n){var a=n.val();u=a,$(".updateAt").text(u[0].PublishTime),t()})}function r(n,a,r){var i=document.createElement("img");i.id="background-img",i.crossOrigin="anonymous",document.body.appendChild(i),"rain"===n?(i.onload=function(){d=new RainyDay({image:this}),d.rain(2>r?[[1,3,1e3*r]]:5>r?[[1,5,1e3]]:[[1,8,1e3]]);var n=[[1,3,2]];r>1?n.push([2,3,10]):r>5?n.push([5,10,20]):r>10&&n.push([7,15,20]),1>r?d.rain(n,500):5>r?d.rain(n,100/r):10>r?d.rain(n,5):d.rain(n,.5)},i.src="./images/"+a+m+".jpg"):i.src="./images/"+a+m+".jpg"}function i(){$("#background-img")&&($("#background-img").remove(),$("canvas").remove(),e(),d={})}function e(){for(var a=1;99999>a;a++)n.clearInterval(a)}function t(){var n=["Rainfall10min","Rainfall1hr","Rainfall3hr","Rainfall6hr","Rainfall12hr","Rainfall24hr"];u.forEach(function(a){p.hasOwnProperty(a.County)||(p[a.County]={Rainfall10min:0,Rainfall1hr:0,Rainfall3hr:0,Rainfall6hr:0,Rainfall12hr:0,Rainfall24hr:0,Sitenumber:0}),p[a.County].Sitenumber+=1;for(var r in n)"Sitenumber"!==n[r]&&(p[a.County][n[r]]+=parseFloat(a[n[r]]))});for(var a in p)for(var r in n)p[a][n[r]]=(p[a][n[r]]/p[a].Sitenumber).toFixed(2);l(p)}function l(n){var a=0,e=0;i(),R.forEach(function(r){$(".mychart").append('<div class="raindrop" id="'+r+'"><h3>'+r+'</h3><h6>10分鐘平均累積雨量<br/><span class="red">'+n[r].Rainfall10min+'</span></h6><h6>1小時平均累積雨量<br/><span class="red">'+n[r].Rainfall1hr+'</span></h6><a href="#title" class="btn-more" onClick=showDetail('+r+")>點擊觀看</a></div>"),0!==Math.round(10*n[r].Rainfall1hr)&&(console.log(n[r].Rainfall1hr),o("#"+r,f(n[r].Rainfall10min,n[r].Rainfall1hr)),a+=1,n[r].Rainfall10min>e&&(e=n[r].Rainfall10min))}),a>4||e>=2?r("rain","",e):r("sunny","")}function o(n,a){a=a||{},$(n).raindrops(a)}function f(n,a){var r,i=10*a,e="rgb(23, 139, 202)",t=40,l=400;return 1>n?r=5*n:5>n?(e="rgb(23, 139, 202)",r=10*n/5):10>n?(e="rgb(23, 139, 202)",l=200,r=15*n/10,t=80):15>n?(e="#f2711c",l=200,r=20*n/15,t=90):20>n?(e="#f2711c",l=200,t=90,r=25*n/20):(e="#DB2828",r=30,l=180,t=100,$("span").removeClass("red")),i>450&&(i=450),{color:e,waveLength:l,frequency:r,waveHeight:t,density:.04,canvasHeight:i}}function s(n){var a=[];u.forEach(function(r){r.County===n.id&&a.push(r)}),$(".mychart").empty(),c(a)}function c(n){var a=0,e=0;i(),n.forEach(function(n){var r=n.SiteName.replace(/[()]/g,"-");$(".mychart").append('<div class="raindrop" id="'+n.SiteId+'"><h3 class="sitename">'+r+"（"+n.Township+'）</h3><h6>10分鐘累積雨量<br/><span class="red">'+n.Rainfall10min+'</span></h6><h6>1小時累積雨量<br/><span class="red">'+n.Rainfall1hr+'</span></h6><h6>日累積雨量<br/><span class="red">'+n.Rainfall24hr+'</span></h6><a href="#'+n.County+'" class="btn-back" onClick=goBack()>返回</a></div>'),0!==Math.round(10*n.Rainfall1hr)&&(o("#"+n.SiteId,f(n.Rainfall10min,n.Rainfall1hr)),a+=1,n.Rainfall10min>e&&(e=n.Rainfall10min))});var t=1*n.length/4;a>t||e>2?r("rain",n[0].County,e):r("sunny",n[0].County)}function h(){$(".mychart").empty(),l(p)}n.showDetail=s,n.goBack=h;{var u,d,m,p={},v=(new Date).getHours(),R=["基隆市","臺北市","新北市","桃園市","新竹市","新竹縣","苗栗縣","臺中市","彰化縣","南投縣","雲林縣","嘉義市","嘉義縣","臺南市","高雄市","屏東縣","宜蘭縣","花蓮縣","臺東縣","連江縣","金門縣","澎湖縣"];new Firebase("https://realtaiwanstat2.firebaseio.com")}a()}(window)},{}]},{},[1]);