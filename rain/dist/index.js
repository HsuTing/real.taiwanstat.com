!function n(a,e,i){function r(o,l){if(!e[o]){if(!a[o]){var c="function"==typeof require&&require;if(!l&&c)return c(o,!0);if(t)return t(o,!0);throw new Error("Cannot find module '"+o+"'")}var s=e[o]={exports:{}};a[o][0].call(s.exports,function(n){var e=a[o][1][n];return r(e?e:n)},s,s.exports,n,a,e,i)}return e[o].exports}for(var t="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(n,a,e){!function(n){function a(){d=m>5&&18>m?"白天":"晚上";var n=new Firebase("https://realtaiwanstat2.firebaseio.com");n.child("rain").limitToLast(1).on("child_added",function(n){var a=n.val(),e=JSON.parse(a);u=e,$(".updateAt").text(u[0].PublishTime),t()})}function e(n,a,e){var i=document.createElement("img");i.id="background-img",i.crossOrigin="anonymous",document.body.appendChild(i),"rain"===n?(i.onload=function(){p=new RainyDay({image:this}),p.rain(2>e?[[1,3,1e3*e]]:5>e?[[1,5,1e3]]:[[1,8,1e3]]);var n=[[1,3,2]];e>1?n.push([2,3,10]):e>5?n.push([5,10,20]):e>10&&n.push([7,15,20]),1>e?p.rain(n,500):5>e?p.rain(n,100/e):10>e?p.rain(n,5):p.rain(n,.5)},i.src="./images/"+a+d+".jpg"):(i.onload=function(){p=new RainyDay({image:this,blur:10}),p.rain([])},i.src="./images/"+a+d+".jpg")}function i(){$("#background-img")&&($("#background-img").remove(),$("canvas").remove(),r(),p={})}function r(){for(var a=1;99999>a;a++)n.clearInterval(a)}function t(){var n=["Rainfall10min","Rainfall1hr","Rainfall3hr","Rainfall6hr","Rainfall12hr","Rainfall24hr"];u.forEach(function(a){v.hasOwnProperty(a.County)||(v[a.County]={Rainfall10min:0,Rainfall1hr:0,Rainfall3hr:0,Rainfall6hr:0,Rainfall12hr:0,Rainfall24hr:0,Sitenumber:0});for(var e in n)v[a.County][n[e]]+=parseFloat(a[n[e]]),v[a.County].Sitenumber+=1});for(var a in v)for(var e in n)v[a][n[e]]=(v[a][n[e]]/v[a].Sitenumber).toFixed(2);o(v)}function o(n){var a=0,r=0;i(),g.forEach(function(e){$(".mychart").append('<div class="raindrop" id="'+e+'"><h3>'+e+'</h3><h6>10分鐘平均累積雨量<br/><span class="red">'+n[e].Rainfall10min+'</span></h6><h6>1小時平均累積雨量<br/><span class="red">'+n[e].Rainfall1hr+'</span></h6><a href="#title" class="btn-more" onClick=showDetail('+e+")>點擊觀看</a></div>"),0!==Math.round(10*n[e].Rainfall10min)&&(l("#"+e,c(n[e].Rainfall10min)),a+=1,n[e].Rainfall10min>r&&(r=n[e].Rainfall10min))}),a>4||r>=2?e("rain","",r):e("sunny","")}function l(n,a){a=a||{},$(n).raindrops(a)}function c(n){var a=34*n;return 1>n?{color:"rgb(23, 139, 202)",waveLength:400,frequency:5*n,waveHeight:80,density:.01,rippleSpeed:.01,canvasHeight:a}:5>n?{color:"rgb(23, 139, 202)",waveLength:350,frequency:10*n/5,waveHeight:80,density:.05,rippleSpeed:.05,canvasHeight:a}:10>n?{color:"rgb(23, 139, 202)",waveLength:200,frequency:15*n/10,waveHeight:80,density:.04,rippleSpeed:.03,canvasHeight:a}:15>n?{color:"#f2711c",waveLength:200,frequency:20*n/15,waveHeight:90,density:.04,rippleSpeed:.05,canvasHeight:a}:20>n?{color:"#f77b7b",waveLength:200,frequency:25*n/20,density:.1,rippleSpeed:.05,canvasHeight:500}:($("span").removeClass("red"),{color:"#DB2828",waveLength:200,frequency:30,waveHeight:90,density:.04,rippleSpeed:.09,canvasHeight:500})}function s(n){var a=[];u.forEach(function(e){e.County===n.id&&a.push(e)}),$(".mychart").empty(),f(a)}function f(n){var a=0,r=0;i(),n.forEach(function(n){var e=n.SiteName.replace(/[()]/g,"-");$(".mychart").append('<div class="raindrop" id="'+n.SiteId+'"><h3>'+e+'</h3><h6>10分鐘累積雨量<br/><span class="red">'+n.Rainfall10min+'</span></h6><h6>1小時累積雨量<br/><span class="red">'+n.Rainfall1hr+'</span></h6><h6>日累積雨量<br/><span class="red">'+n.Rainfall24hr+'</span></h6><a href="#'+n.County+'" class="btn-back" onClick=goBack()>返回</a></div>'),0!==Math.round(10*n.Rainfall10min)&&(l("#"+n.SiteId,c(n.Rainfall1hr)),a+=1,n.Rainfall10min>r&&(r=n.Rainfall10min))});var t=1*n.length/4;a>t||r>2?e("rain",n[0].County,r):e("sunny",n[0].County)}function h(){$(".mychart").empty(),o(v)}n.showDetail=s,n.goBack=h;{var u,p,d,v={},m=(new Date).getHours(),g=["基隆市","臺北市","新北市","桃園市","新竹市","新竹縣","苗栗縣","臺中市","彰化縣","南投縣","雲林縣","嘉義市","嘉義縣","臺南市","高雄市","屏東縣","宜蘭縣","花蓮縣","臺東縣","連江縣","金門縣","澎湖縣"];new Firebase("https://realtaiwanstat2.firebaseio.com")}a()}(window)},{}]},{},[1]);